<!DOCTYPE html>
"Fedez & Marco Masini – Male necessario",
"Francesco Renga – Il meglio di me",
"Fulminacci – Stupida sfortuna",
"J-Ax – Italia",
"LDA & Aka7even – Poesie clandestine",
"Leo Gassmann – Naturale",
"Levante – Sei tu",
"Luchè – Labirinto",
"Malika Ayane – Animali notturni",
"Mara Sattei – Le cose che non sai di me",
"Maria Antonietta & Colombre – La felicità e basta",
"Michele Bravi – Prima o poi",
"Nayt – Prima che",
"Patty Pravo – Opera",
"Raf – Ora e per sempre",
"Sal Da Vinci – Per sempre sì",
"Samurai Jay – Ossessione",
"Sayf – Tu mi piaci tanto",
"Serena Brancale – Qui con me",
"Tommaso Paradiso – I romantici",
"Tredici Pietro – Uomo che cade"
];


let votes = JSON.parse(localStorage.getItem("votes") || "{}");


function startVote() {
const nick = nickname.value.trim();
const code = document.getElementById("code").value.trim();
if (!nick || code !== SECRET_CODE) {
alert("Nickname o codice errato");
return;
}
if (votes[nick]) {
alert("Hai già votato!");
return;
}
login.classList.add("hidden");
vote.classList.remove("hidden");
renderArtists();
}


function renderArtists() {
artists.forEach((a, i) => {
const div = document.createElement("div");
div.className = "artist";
div.innerHTML = `<label>${a}</label>
<input type="range" min="1" max="10" value="5" id="a${i}" />
<div class="score">Voto: <span id="s${i}">5</span></div>`;
artistsDiv.appendChild(div);
div.querySelector("input").oninput = e => {
div.querySelector("span").textContent = e.target.value;
};
});
}


const artistsDiv = document.getElementById("artists");


function submitVotes() {
const nick = nickname.value.trim();
votes[nick] = artists.map((_, i) => +document.getElementById(`a${i}`).value);
localStorage.setItem("votes", JSON.stringify(votes));
vote.classList.add("hidden");
showResults();
}


function showResults() {
results.classList.remove("hidden");
const totals = artists.map((a, i) => {
let sum = 0, count = 0;
Object.values(votes).forEach(v => {
sum += v[i]; count++;
});
return { name: a, avg: sum / count };
}).sort((a,b)=>b.avg-a.avg);


totals.forEach(t => {
const bar = document.createElement("div");
bar.className = "bar";
bar.style.width = (t.avg * 8) + "%";
bar.textContent = `${t.name} – ${t.avg.toFixed(2)}`;
ranking.appendChild(bar);
});
}
</script>
</body>
</html>
