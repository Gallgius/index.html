<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sanremo ‚Äì Votazione</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg, #0b0b1e, #1c1c3c);
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    .login, .vote, .results {
      max-width: 800px;
      margin: auto;
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
    }
    button {
      width: 100%;
      padding: 14px;
      background: gold;
      color: #000;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
      font-weight: bold;
    }
    .artist {
      margin: 15px 0;
    }
    .artist label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }
    .artist input[type=range] {
      width: 100%;
    }
    .score {
      text-align: right;
      font-size: 14px;
      opacity: 0.8;
    }
    .hidden { display: none; }
    .bar {
      background: linear-gradient(90deg, gold, orange);
      height: 26px;
      border-radius: 8px;
      margin: 6px 0;
      padding-left: 10px;
      line-height: 26px;
      color: #000;
      font-weight: bold;
      animation: grow 1.2s ease-out;
    }
    @keyframes grow {
      from { width: 0; }
    }
  </style>
</head>
<body>

<h1>üé§ Sanremo ‚Äì Votazione Finale</h1>

<div class="login" id="login">
  <h2>Inserisci i dati</h2>
  <input id="nickname" placeholder="Nickname" />
  <input id="code" placeholder="Codice" />
  <button onclick="startVote()">Inizia a votare</button>
</div>

<div class="vote hidden" id="vote">
  <h2>Vota tutti i cantanti (1‚Äì10)</h2>
  <div id="artists"></div>
  <button onclick="submitVotes()">Invia voti</button>
</div>

<div class="results hidden" id="results">
  <h2>üèÜ Classifica Finale</h2>
  <div id="ranking"></div>
</div>

<script>
const SECRET_CODE = "SANREMO25"; // CAMBIA QUI IL CODICE

const artists = [
"Arisa ‚Äì Magica favola",
"Bambole di Pezza ‚Äì Resta con me",
"Chiello ‚Äì Ti penso sempre",
"Dargen D'Amico ‚Äì AI AI",
"Ditonellapiaga ‚Äì Che fastidio!",
"Eddie Brock ‚Äì Avvoltoi",
"Elettra Lamborghini ‚Äì Voil√†",
"Enrico Nigiotti ‚Äì Ogni volta che non so volare",
"Ermal Meta ‚Äì Stella stellina",
"Fedez & Marco Masini ‚Äì Male necessario",
"Francesco Renga ‚Äì Il meglio di me",
"Fulminacci ‚Äì Stupida sfortuna",
"J-Ax ‚Äì Italia",
"LDA & Aka7even ‚Äì Poesie clandestine",
"Leo Gassmann ‚Äì Naturale",
"Levante ‚Äì Sei tu",
"Luch√® ‚Äì Labirinto",
"Malika Ayane ‚Äì Animali notturni",
"Mara Sattei ‚Äì Le cose che non sai di me",
"Maria Antonietta & Colombre ‚Äì La felicit√† e basta",
"Michele Bravi ‚Äì Prima o poi",
"Nayt ‚Äì Prima che",
"Patty Pravo ‚Äì Opera",
"Raf ‚Äì Ora e per sempre",
"Sal Da Vinci ‚Äì Per sempre s√¨",
"Samurai Jay ‚Äì Ossessione",
"Sayf ‚Äì Tu mi piaci tanto",
"Serena Brancale ‚Äì Qui con me",
"Tommaso Paradiso ‚Äì I romantici",
"Tredici Pietro ‚Äì Uomo che cade"
];

let votes = JSON.parse(localStorage.getItem("votes") || "{}");

function startVote() {
  const nick = nickname.value.trim();
  const code = document.getElementById("code").value.trim();
  if (!nick || code !== SECRET_CODE) {
    alert("Nickname o codice errato");
    return;
  }
  if (votes[nick]) {
    alert("Hai gi√† votato!");
    return;
  }
  login.classList.add("hidden");
  vote.classList.remove("hidden");
  renderArtists();
}

function renderArtists() {
  artists.forEach((a, i) => {
    const div = document.createElement("div");
    div.className = "artist";
    div.innerHTML = `<label>${a}</label>
      <input type="range" min="1" max="10" value="5" id="a${i}" />
      <div class="score">Voto: <span id="s${i}">5</span></div>`;
    artistsDiv.appendChild(div);
    div.querySelector("input").oninput = e => {
      div.querySelector("span").textContent = e.target.value;
    };
  });
}

const artistsDiv = document.getElementById("artists");

function submitVotes() {
  const nick = nickname.value.trim();
  votes[nick] = artists.map((_, i) => +document.getElementById(`a${i}`).value);
  localStorage.setItem("votes", JSON.stringify(votes));
  vote.classList.add("hidden");
  showResults();
}

function showResults() {
  results.classList.remove("hidden");
  const totals = artists.map((a, i) => {
    let sum = 0, count = 0;
    Object.values(votes).forEach(v => {
      sum += v[i]; count++;
    });
    return { name: a, avg: sum / count };
  }).sort((a,b)=>b.avg-a.avg);

  totals.forEach(t => {
    const bar = document.createElement("div");
    bar.className = "bar";
    bar.style.width = (t.avg * 8) + "%";
    bar.textContent = `${t.name} ‚Äì ${t.avg.toFixed(2)}`;
    ranking.appendChild(bar);
  });
}
</script>
</body>
</html>

